import{_ as V}from"./FiftyText-1e25ff4f.js";import{u as h}from"./useAPI-d04b5e55.js";import{_ as p}from"./NewTextInput-857cb469.js";import{_ as B}from"./NewSelectInput-dc65b2d8.js";import{N}from"./NewActionButton-14875054.js";import{d as v,K as q,e as f,c as w,a as n,w as D,b as F,u as c,o as L,j as R}from"./app-2cac3384.js";import{u as k}from"./notification-c7ee7316.js";import{c as T}from"./currencies_countries-fbccd8be.js";import"./Spinner-dd5ccd9b.js";/* empty css                                                     */import"./_plugin-vue_export-helper-c27b6911.js";const U={class:"transaction-box-container"},$={class:"inputs"},j={name:"TransactionBox"},M=Object.assign(j,{props:{receivingCountries:{required:!0,default:[],type:Array}},setup(i){const y=i,A=h(),_=k(),t=v({}),e=v({amount:null,country:null,convertedAmount:null}),l=q().props.geoDetails,u=f(!1),s=f(0),g=async()=>{u.value=!0;const a=y.receivingCountries.find(o=>o.code_iso_2===e.country||o.code===e.country);try{const o=await axios.post("/api/convert-currency",{baseCurrency:l.country.currency.code,requiredCurrency:a.currency.code});console.log({res:o}),s.value=o==null?void 0:o.data[a.currency.code].value,e.convertedAmount=m()}catch{_.notify("Exchange rate is not available at the moment..","error")}finally{u.value=!1}},b=()=>{if(t.amount=[],e.amount>=1e5)return e.amount=1e5,t.amount=["100,000 is the maximum amount"];e.convertedAmount=m()},C=()=>{if(t.convertedAmount=[],e.convertedAmount>=1e5)return e.convertedAmount=1e5,t.convertedAmount=["100,000 is the maximum amount"];e.amount=x()},m=()=>parseFloat((s.value*e.amount).toFixed(2)),x=()=>parseFloat((e.convertedAmount/s.value).toFixed(2));return(a,o)=>{var d;return L(),w("div",U,[n(V,{color:"dark",variation:"body-bold"},{default:D(()=>[R(" Provide Your Transaction Details ")]),_:1}),F("div",$,[n(p,{modelValue:e.amount,"onUpdate:modelValue":[o[0]||(o[0]=r=>e.amount=r),b],errors:t.amount,info:c(l).country.currency.code,label:"Your amount",placeholder:"Amount to send",max:1e5,min:10,required:"",type:"number",title:"amount"},null,8,["modelValue","errors","info"]),n(B,{modelValue:e.country,"onUpdate:modelValue":[o[1]||(o[1]=r=>e.country=r),g],disabled:!1,errors:(d=c(A).errors.value)==null?void 0:d.country,options:i.receivingCountries,label:"Receiver Country","label-accessor":"label",placeholder:"Country",required:"",title:"country",type:"text","value-accessor":"code_iso_2"},null,8,["modelValue","errors","options"]),n(p,{errors:t.convertedAmount,modelValue:e.convertedAmount,"onUpdate:modelValue":[o[2]||(o[2]=r=>e.convertedAmount=r),C],info:c(T)[e.country]??"",isLoading:u.value,label:"Receiver gets",placeholder:"Amount received",required:"",max:1e5,min:10,type:"number",title:"convertedAmount"},null,8,["errors","modelValue","info","isLoading"]),n(N,{url:a.route("user.info.page"),class:"custom-action-btn",title:"Get Started"},null,8,["url"])])])}}});export{M as default};
