import{u as $}from"./useAPI-d04b5e55.js";import{_ as q,V as Q}from"./vue-tel-input-1bed40d4.js";import{u as X}from"./notification-c7ee7316.js";import j from"./ReceiverItem-7304f6d2.js";import{e as R,i as K,o as c,c as p,b as i,a as s,w as D,j as z,t as C,g as y,n as x,f as F,d as P,u as n,F as ee,r as te,O as _}from"./app-2cac3384.js";import{u as re}from"./useHelpers-046d81e5.js";import{c as b}from"./countries-4c15b513.js";import{_ as h}from"./NewSelectInput-dc65b2d8.js";import{N as O}from"./NewActionButton-14875054.js";import{_ as f}from"./NewTextInput-857cb469.js";import{_ as ae}from"./FiftyText-1e25ff4f.js";import{_ as oe}from"./Spinner-dd5ccd9b.js";import"./_plugin-vue_export-helper-c27b6911.js";/* empty css                                                     */const le={AFG:"AF",ALA:"AX",ALB:"AL",DZA:"DZ",ASM:"AS",AND:"AD",AGO:"AO",AIA:"AI",ATA:"AQ",ATG:"AG",ARG:"AR",ARM:"AM",ABW:"AW",AUS:"AU",AUT:"AT",AZE:"AZ",BHS:"BS",BHR:"BH",BGD:"BD",BRB:"BB",BLR:"BY",BEL:"BE",BLZ:"BZ",BEN:"BJ",BMU:"BM",BTN:"BT",BOL:"BO",BES:"BQ",BIH:"BA",BWA:"BW",BVT:"BV",BRA:"BR",IOT:"IO",BRN:"BN",BGR:"BG",BFA:"BF",BDI:"BI",CPV:"CV",KHM:"KH",CMR:"CM",CAN:"CA",CYM:"KY",CAF:"CF",TCD:"TD",CHL:"CL",CHN:"CN",CXR:"CX",CCK:"CC",COL:"CO",COM:"KM",COG:"CG",COD:"CD",COK:"CK",CRI:"CR",CIV:"CI",HRV:"HR",CUB:"CU",CUW:"CW",CYP:"CY",CZE:"CZ",DNK:"DK",DJI:"DJ",DMA:"DM",DOM:"DO",ECU:"EC",EGY:"EG",SLV:"SV",GNQ:"GQ",ERI:"ER",EST:"EE",ETH:"ET",SWZ:"SZ",FLK:"FK",FRO:"FO",FJI:"FJ",FIN:"FI",FRA:"FR",GUF:"GF",PYF:"PF",ATF:"TF",GAB:"GA",GMB:"GM",GEO:"GE",DEU:"DE",GHA:"GH",GIB:"GI",GRC:"GR",GRL:"GL",GRD:"GD",GLP:"GP",GUM:"GU",GTM:"GT",GGY:"GG",GIN:"GN",GNB:"GW",GUY:"GY",HTI:"HT",HMD:"HM",VAT:"VA",HND:"HN",HKG:"HK",HUN:"HU",ISL:"IS",IND:"IN",IDN:"ID",IRN:"IR",IRQ:"IQ",IRL:"IE",IMN:"IM",ISR:"IL",ITA:"IT",JAM:"JM",JPN:"JP",JEY:"JE",JOR:"JO",KAZ:"KZ",KEN:"KE",KIR:"KI",PRK:"KP",KOR:"KR",KWT:"KW",KGZ:"KG",LAO:"LA",LVA:"LV",LBN:"LB",LSO:"LS",LBR:"LR",LBY:"LY",LIE:"LI",LTU:"LT",LUX:"LU",MAC:"MO",MKD:"MK",MDG:"MG",MWI:"MW",MYS:"MY",MDV:"MV",MLI:"ML",MLT:"MT",MHL:"MH",MTQ:"MQ",MRT:"MR",MUS:"MU",MYT:"YT",MEX:"MX",FSM:"FM",MDA:"MD",MCO:"MC",MNG:"MN",MNE:"ME",MSR:"MS",MAR:"MA",MOZ:"MZ",MMR:"MM",NAM:"NA",NRU:"NR",NPL:"NP",NLD:"NL",NCL:"NC",NZL:"NZ",NIC:"NI",NER:"NE",NGA:"NG",NIU:"NU",NFK:"NF",MNP:"MP",NOR:"NO",OMN:"OM",PAK:"PK",PLW:"PW",PSE:"PS",PAN:"PA",PNG:"PG",PRY:"PY",PER:"PE",PHL:"PH",PCN:"PN",POL:"PL",PRT:"PT",PRI:"PR",QAT:"QA",REU:"RE",ROU:"RO",RUS:"RU",RWA:"RW",BLM:"BL",SHN:"SH",KNA:"KN",LCA:"LC",MAF:"MF",SPM:"PM",VCT:"VC",WSM:"WS",SMR:"SM",STP:"ST",SAU:"SA",SEN:"SN",SRB:"RS",SYC:"SC",SLE:"SL",SGP:"SG",SXM:"SX",SVK:"SK",SVN:"SI",SLB:"SB",SOM:"SO",ZAF:"ZA",SGS:"GS",SSD:"SS",ESP:"ES",LKA:"LK",SDN:"SD",SUR:"SR",SJM:"SJ",SWE:"SE",CHE:"CH",SYR:"SY",TWN:"TW",TJK:"TJ",TZA:"TZ",THA:"TH",TLS:"TL",TGO:"TG",TKL:"TK",TON:"TO",TTO:"TT",TUN:"TN",TUR:"TR",TKM:"TM",TCA:"TC",TUV:"TV",UGA:"UG",UKR:"UA",ARE:"AE",GBR:"GB",USA:"US",UMI:"UM",URY:"UY",UZB:"UZ",VUT:"VU",VEN:"VE",VNM:"VN",VGB:"VG",VIR:"VI",WLF:"WF",ESH:"EH",YEM:"YE",ZMB:"ZM",ZWE:"ZW"};const ne={class:"w-full flex flex-col justify-start relative"},se=["for"],ie={key:0,class:"text-red-600"},ue=["id","disabled","placeholder","value"],de={class:"flex justify-between"},ce={class:"text-red-600 text-base whitespace-nowrap"},me={class:"text-gray-500 text-base font-semibold absolute right-2 top-11 whitespace-nowrap"},fe={name:"NewTextArea"},pe=Object.assign(fe,{props:{modelValue:{required:!0},label:{default:"",type:String},placeholder:{default:"",type:String},type:{default:"text"},max:{default:1e4},min:{default:10},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},errors:{type:Object,default:{}},title:{type:String,required:!0},info:{type:String,required:!1},isLoading:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(a,{expose:B}){const u=R(null);return K(()=>{u.value.hasAttribute("autofocus")&&u.value.focus()}),B({focus:()=>u.value.focus()}),(M,m)=>(c(),p("div",ne,[i("label",{for:a.title,class:"w-fit inline-block mb-2"},[s(ae,null,{default:D(()=>[z(C(a.label??"")+" ",1),a.required?(c(),p("span",ie,"*")):y("",!0)]),_:1})],8,se),i("textarea",{id:a.title,ref_key:"input",ref:u,rows:"3",class:x([{"border-red-300":a.errors.length>0,"bg-gray-300":a.disabled},"form-control block w-full text-lg font-normal text-gray-700 bg-clip-padding border border-solid transition ease-linear m-0 focus:text-gray-700 focus:bg-white focus:border-indigo-300 focus:outline-none"]),disabled:a.disabled,placeholder:a.placeholder,value:a.modelValue,onInput:m[0]||(m[0]=o=>M.$emit("update:modelValue",o.target.value))},null,42,ue),i("div",de,[i("div",ce,C(a.errors[0]),1),i("div",me,C(a.info),1)]),a.isLoading?(c(),F(oe,{key:0,class:"right-1 top-0 absolute"})):y("",!0)]))}}),Me={class:"receiver-info-form-wrapper"},Ae={class:"action-buttons"},Ne={key:0,class:"text-center"},Se=i("div",{class:"mt-6 mb-6 text-2xl text-green-800 font-semibold"}," Recently Added Receivers ",-1),Ce={class:"flex flex-wrap gap-5 max-w-3xl"},be={name:"ReceiverInfoForm"},he=Object.assign(be,{props:{user:{default:null,type:Object},latestReceivers:{default:[],type:Array},banks:{default:[],type:Array}},emits:["stepChanged"],setup(a,{emit:B}){const u=a,M=X(),m=re(),o=$(),A=R(""),S=R(!1),N=P({label:"",value:""}),e=P({first_name:"",last_name:"",phone:"",email:"",country:"",bank:"",account_number:"",branch_number:"",banking_info:""}),H=async()=>{o.startRequest();try{const l=e.id?await axios.put(`/api/receiver/${e.id}`,{...e,paymentIntentId:A.value}):await axios.post(`/api/${u.user.id}/receiver`,{...e,paymentIntentId:A.value});(l.data.id||l.data.status==="success")&&(M.notify("Receiver Information Saved","success"),k())}catch(l){M.notify("Error","error"),o.handleErrors(l)}finally{o.requestCompleted()}},k=()=>{_.get("/checkout?payment-reference-identification="+A.value+"&country="+N.value.value)},Z=()=>{_.get("/transaction-info")},Y=l=>{N.value=b.find(t=>t.value===l.country||t.value===le[l.country]),Object.assign(e,l)},W=l=>{var d;const t=(d=e.phone)==null?void 0:d.slice(l.dialCode.length+1);e.phone="+"+l.dialCode+t},w=()=>{e.country=u.user.handled_transaction.user.country};return K(()=>{var t;A.value=m.getURLParam("payment-reference-identification");const l=m.getURLParam("country");console.log(l),N.value=b.find(d=>d.value===l),e.country=(t=N.value)==null?void 0:t.value,S.value=!!u.user.transaction_id,S.value&&w()}),(l,t)=>{var d,T,L,G,V,I,v,g,U;return c(),p("div",null,[i("div",Me,[s(f,{class:"fifty-form-input",modelValue:e.first_name,"onUpdate:modelValue":t[0]||(t[0]=r=>e.first_name=r),errors:(d=n(o).errors.value)==null?void 0:d.first_name,label:"First Name",placeholder:"John",required:"",title:"first_name"},null,8,["modelValue","errors"]),s(f,{class:"fifty-form-input",modelValue:e.last_name,"onUpdate:modelValue":t[1]||(t[1]=r=>e.last_name=r),errors:(T=n(o).errors.value)==null?void 0:T.last_name,label:"Last Name",placeholder:"Doe",required:"",title:"last_name"},null,8,["modelValue","errors"]),s(f,{class:"fifty-form-input",modelValue:e.email,"onUpdate:modelValue":t[2]||(t[2]=r=>e.email=r),errors:(L=n(o).errors.value)==null?void 0:L.email,label:"Email",placeholder:"john@example.com",title:"email"},null,8,["modelValue","errors"]),s(q,{errors:(G=n(o).errors.value)==null?void 0:G.phone,required:!1,label:"Phone Number",title:"phone",class:"fifty-form-input"},{default:D(()=>{var r,E;return[s(n(Q),{id:"exampleFormControlInput1",ref:"input",modelValue:e.phone,"onUpdate:modelValue":t[3]||(t[3]=J=>e.phone=J),class:x([{"error-border":((E=(r=n(o).errors.value)==null?void 0:r.phone)==null?void 0:E.length)>0},"form-control block w-full px-0 py-0 text-lg font-normal h-10 text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-linear m-0 focus:text-gray-700 focus:bg-white focus:border-indigo-300 focus:outline-none"]),defaultCountry:n(m).getURLParam("country"),inputOptions:{placeholder:"123456789"},onlyCountries:S.value?[e.country]:[],mode:"international",onCountryChanged:W},null,8,["modelValue","class","defaultCountry","onlyCountries"])]}),_:1},8,["errors"]),s(h,{class:"fifty-form-input",modelValue:e.country,"onUpdate:modelValue":t[4]||(t[4]=r=>e.country=r),errors:(V=n(o).errors.value)==null?void 0:V.country,options:n(b),disabled:"",label:"Country",placeholder:"Country",required:"",title:"country",type:"text"},null,8,["modelValue","errors","options"]),s(h,{class:"fifty-form-input",modelValue:e.bank_id,"onUpdate:modelValue":t[5]||(t[5]=r=>e.bank_id=r),errors:(I=n(o).errors.value)==null?void 0:I.bank_id,options:a.banks,label:"International Bank","label-accessor":"label",placeholder:"International Bank",required:"",title:"bank",type:"text","value-accessor":"id"},null,8,["modelValue","errors","options"]),s(f,{class:"fifty-form-input",modelValue:e.account_number,"onUpdate:modelValue":t[6]||(t[6]=r=>e.account_number=r),errors:(v=n(o).errors.value)==null?void 0:v.account_number,label:"Account Number",placeholder:"123456789",required:"",title:"account_number"},null,8,["modelValue","errors"]),s(f,{class:"fifty-form-input",modelValue:e.branch_number,"onUpdate:modelValue":t[7]||(t[7]=r=>e.branch_number=r),errors:(g=n(o).errors.value)==null?void 0:g.branch_number,label:"Branch Number",placeholder:"123456789",title:"branch_number"},null,8,["modelValue","errors"]),s(pe,{modelValue:e.banking_info,"onUpdate:modelValue":t[8]||(t[8]=r=>e.banking_info=r),errors:(U=n(o).errors.value)==null?void 0:U.banking_info,label:"Additional Information / Comments",placeholder:"I am open to different payment options...",title:"banking_info"},null,8,["modelValue","errors"]),i("div",Ae,[s(O,{reversed:!0,title:"Back",onClick:Z}),s(O,{isLoading:n(o).isLoading.value,title:"Continue",onClick:H},null,8,["isLoading"])])]),a.latestReceivers.length>0?(c(),p("div",Ne,[Se,i("div",Ce,[(c(!0),p(ee,null,te(a.latestReceivers,r=>(c(),F(j,{key:r.id,receiver:r,useSavedReceiver:Y},null,8,["receiver"]))),128))])])):y("",!0)])}}});export{he as default};
